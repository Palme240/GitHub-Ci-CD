{
  "service": "sls-az-func-rest-api",
  "provider": {
    "name": "azure",
    "runtime": "python3.7",
    "region": "${opt:region, 'West EU'}",
    "stage": "${opt:stage, 'dev'}",
    "prefix": "${opt:prefix, 'demo'}",
    "apim": true
  },
  "plugins": [
    "serverless-azure-functions",
    "serverless-webpack"
  ],
  "functions": {
    "HelloWorld": {
      "handler": "Azure_function.pipeline_main",
      "events": [
        {
          "http": true,
          "name": "req",
          "methods": [
            "get"
          ],
          "route": "Azure_function",
          "authLevel": "anonymous"
"appSettings": [
    {
        "name": "AzureWebJobsStorage",
        "value": "[concat('DefaultEndpointsProtocol=https;AccountName=', variables('storageAccountName'), ';AccountKey=', listKeys(variables('storageAccountid'),'2019-06-01').keys[0].value)]"
    },
    {
        "name": "AzureWebJobsDashboard",
        "value": "[concat('DefaultEndpointsProtocol=https;AccountName=', variables('storageAccountName'), ';AccountKey=', listKeys(variables('storageAccountid'),'2019-06-01').keys[0].value)]"
    }
]
          
        }
      ]
    }
  }
}
